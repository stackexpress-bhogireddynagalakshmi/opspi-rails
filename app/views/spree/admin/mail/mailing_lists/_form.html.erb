<%= render partial: 'spree/admin/shared/error_messages', locals: { target: @product } %>
<style type="text/css">
  .formSuccess{
    color: green;
  }
</style>


<!-- @mailinglist here is api object not database object -->
<% url =  @mailinglist.present? ?   admin_mail_mailing_list_path(@mailinglist.mailinglist_id) : admin_mail_mailing_lists_path%>

 <%=form_for "mailinglist", url: url, html: {method: @mailinglist.present? ? :put : :post} do |f|%> 

  <%=hidden_field_tag :domain_id, @mail_domain.try("domain_id")%>
  <fieldset>
    <div class="form-group field">
      <label>Domain</label>
      <%=f.text_field 'domain', value: @mailinglist.try(:domain), class: 'form-control',required: true%>
    </div>

    <div class="form-group field">
      <label>Listname</label>
      <%=f.text_field 'listname', value: @mailinglist.try(:listname), class: 'form-control',required: true%>
    </div>

    <div class="form-group field">
      <label>Email</label>
      <%=f.email_field 'email', value: @mailinglist.try(:email), class: 'form-control'%>
    </div>

    <div class="form-group field">
      <label>Password</label>
      <%=f.password_field 'password', class: 'form-control'%>
    </div>

    <%=submit_tag "#{@mail_domain.present? ? 'Update' : 'Add'} Mailing List",class: 'btn btn-primary'%>

  </fieldset>
<%end%>

<div>
 
  <%if @response && @response["status"]=='ERROR'%>
    <div style="color: red;" class="mt-3"><%=@response["message"]%></</div> 
  <%end%>
</div>


<script type="text/javascript">
  $(document).ready(function (argument) {
    $('#FlashAlertsContainer').removeClass('d-none');
  });
</script>
