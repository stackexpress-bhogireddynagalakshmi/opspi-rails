<style>
ul.nav-sidebar > li > a[aria-expanded="true"] .drop-menu-indicator {
  transform: rotate(90deg);
  transition: .3s ease-in-out;
}
</style>
<nav>
  <div class="text-right d-lg-none p-2 border-bottom">
    <button
      id="sidebar-close"
      class="btn btn-link"
      type="button"
      aria-expanded="false"
      aria-label="Toggle navigation">
      <%= svg_icon name: "cancel.svg", width: '20', height: '20' %>
    </button>
  </div>

  <% if can? :admin, Spree::Order %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarOrder">
      <%= tab *Spree::BackendConfiguration::ORDER_TABS, icon: 'list.svg' %>
    </ul>
  <% end %>

  <% if can?(:admin, Spree::ReturnAuthorization) || can?(:admin, Spree::CustomerReturn) %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarReturn">
      <%= main_menu_tree Spree.t(:returns), icon: "returns.svg", sub_menu: "returns", url: "#sidebar-returns" %>
    </ul>
  <% end %>

  <% if can? :admin, Spree::Product %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarProduct">
      <%= main_menu_tree Spree.t(:products), icon: "products.svg", sub_menu: "product", url: "#sidebar-product" %>
    </ul>
  <% end %>

  <% if can? :admin, Spree::Admin::ReportsController %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarReport">
      <%= tab *Spree::BackendConfiguration::REPORT_TABS, icon: 'report.svg' %>
    </ul>
  <% end %>

  <% if can? :admin, Spree::Promotion %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarPromotion">
      <%= main_menu_tree Spree.t(:promotions), icon: "promotion.svg", sub_menu: "promotion", url: "#sidebar-promotions" %>
    </ul>
  <% end %>

  <% if Spree.user_class && can?(:admin, Spree.user_class) %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarUser">
      <%= tab *Spree::BackendConfiguration::USER_TABS, url: spree.admin_users_path, icon: 'users.svg' %>
    </ul>
  <% end %>

  <% if can? :admin, current_store %>
    <ul class="nav nav-sidebar border-bottom" id="sidebarConfiguration">
      <%= main_menu_tree Spree.t(:configurations), icon: "settings.svg", sub_menu: "configuration", url: "#sidebar-configuration" %>
    </ul>
  <% end %>

    <ul class="nav nav-sidebar border-bottom" id="sidebarDomain">
      <%= tab 'Domain Registrations', url: spree.admin_domain_registrations_path,  icon: 'report.svg'%>
    </ul>

    <%if current_spree_user.store_admin? || current_spree_user.admin?%>
     <ul class="nav nav-sidebar border-bottom" id="sidebarDomain">
      <%= tab 'Reseller Club', url: spree.setup_reseller_club_admin_domain_registrations_path,  icon: 'report.svg'%>
    </ul>
    <%end%>

    <%if current_spree_user.end_user? %>
      <ul class="nav nav-sidebar border-bottom" id="sidebarHostingControl">
        <%= main_menu_tree Spree.t(:hosting_controls), icon: "report.svg", sub_menu: "hosting_control", url: "#sidebar-hosting_controls" %>
      </ul>
    <%end%>

    <%if ENV['OPSBOT_ENABLED'] == "true" %>
      <ul class="nav nav-sidebar border-bottom" id="sidebarOpsBot">
        <%= main_menu_tree Spree.t(:opsbot), icon: "report.svg", sub_menu: "opsbot", url: "#sidebar-opsbot" %>
      </ul>
    <%end%>
</nav>

<script type="text/javascript">


var svg = document.querySelector('.drop-menu-indicator');
svg.innerHTML=`<path  fill="currentColor" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z” style="fill-rule:nonzero;stroke:currentColor;stroke-width:75px;"></path>`;

$('.drop-menu-indicator').attr("viewBox","0 0 330 330");

$('#sidebar-hosting_controls').on('click', function() {
  if($("a").hasClass("collapsed")){
    $('a').attr("aria-expanded","false");  
  } else {
    $('a').attr("aria-expanded","true");
    $('#sidebar-hosting_controls').addClass("show");
  }
});
</script>