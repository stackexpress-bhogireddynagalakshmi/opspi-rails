<% content_for :page_title do %>
  <%= Spree.t(:"admin.user.my_store") %>
<% end %>

<%= form_for [:admin, @store], url: admin_my_store_path(@store.id) ,html: { multipart: true } do |f| %>
<div class="card mb-4">
  <div class="card-header">
    <h1 class="card-title mb-0 h5">
      <%= Spree.t(:basic_information) %>
    </h1>
  </div>

  <div class="card-body">
    <%= f.field_container :logo, class: ['form-group'] do %>
      <% if @store.logo.attached? && @store.logo.variable? %>
        <%= image_tag main_app.url_for(@store.logo.variant(resize: '244x104>')) %>
      <% elsif @store.logo.attached? && @store.logo.image? %>
        <%= image_tag main_app.url_for(@store.logo) %>
      <% end %>
      <%= f.field_container :logo, class: ['form-group'] do %>
        <%= f.label :logo, Spree.t(:logo) %><br>
        <%= f.file_field :logo %>
        <%= f.error_message_on :logo %>
      <% end %>
    <% end %>
    <%= f.field_container :mailer_logo, class: ['form-group'] do %>
      <% if @store.mailer_logo.attached? && @store.mailer_logo.variable? %>
        <%= image_tag main_app.url_for(@store.mailer_logo.variant(resize: '244x104>')) %>
      <% end %>
      <%= f.field_container :mailer_logo, class: ['form-group'] do %>
        <%= f.label :mailer_logo, Spree.t(:mailer_logo) %><br>
        <%= f.file_field :mailer_logo, accept: 'image/png, image/jpeg' %>
        <%= f.error_message_on :mailer_logo %>
      <% end %>
    <% end %>
    <%= f.field_container :name, class: ['form-group'] do %>
      <%= f.label :name, raw(Spree.t(:name) + required_span_tag) %>
      <%= f.text_field :name, class: 'form-control', required: true %>
      <%= f.error_message_on :name %>
    <% end %>


    <%= f.field_container :custom_domain, class: ['form-group'] do %>
      <%= f.label :custom_domain, raw(Spree.t(:marketplace_url) + required_span_tag) %>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">https://</span>
        </div>
        <%= text_field_tag :url,@store.account.subdomain, class: 'form-control',readonly: true %>
      </div>
     
    <% end %>


    <%= f.field_container :url, class: ['form-group'] do %>
      <%= f.label :url, raw(Spree.t(:custom_marketplace_url) + required_span_tag) %>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">https://</span>
        </div>
       <%domain = @store.account.domain == @store.account.subdomain ? '' : @store.account.domain%>
       <%= text_field_tag :custom_domain,domain, class: 'form-control' %>
      </div>
      <%= f.error_message_on :url %>
    <% end %>

     <%= f.field_container :url, class: ['form-group'] do %>

     <%=f.submit 'Submit',class: 'btn btn-primary'%>

     <%end%>
     
  </div>
</div>

<%end%>