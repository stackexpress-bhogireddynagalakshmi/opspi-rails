
<%= render partial: 'spree/admin/shared/error_messages', locals: { target: @product } %>
<style type="text/css">
  .formSuccess{
    color: green;
  }
</style><% content_for :page_title do %>
 <div class="mt-2"></div>
  <%= link_to Spree.t(:domains), spree.admin_hosted_zones_url %> /
  <%= Spree.t(:new_domain) %>
<% end %>

<%=form_for :hosted_zones, url: admin_hosted_zones_path,html: {method: :post} do |f|%>
  <fieldset>
    <div class="form-group field">
      <label>Domain Name (eg:example.com)</label>
      <%=f.text_field :name, class: 'form-control', id:"dname", required: true %>
    </div>
    <div class="form-group field">
      <label>NS (eg: ns1.example.com)</label>
      <%=f.text_field :ns, class: 'form-control', id:"ns", required: true %>
    </div>
    <div class="form-group field">
      <label>Email (eg: webmaster.example.com.)</label>
      <%=f.text_field :mbox, class: 'form-control', id:"mbox", required: true %>
    </div>   
    <div class="form-group field">
      <label>Refresh (Seconds)</label>
      <%=f.text_field :refresh, class: 'form-control', value:"7200", id:"refresh" %>
    </div> 
    <div class="form-group field">
      <label>Retry (Seconds)</label>
      <%=f.text_field :retry, class: 'form-control', value:"540",id:"retry" %>
    </div>  
    <div class="form-group field">
      <label>Expire (Seconds)</label>
      <%=f.text_field :expire, class: 'form-control',value:"604800", id:"expire" %>
    </div>  
    <div class="form-group field">
      <label>Minimum (negative cache ttl) (Seconds)</label>
      <%=f.text_field :minimum, class: 'form-control',value:"3600", id:"minimum" %>
    </div>  
    <div class="form-group field">
      <label>TTL (Seconds)</label>
      <%=f.text_field :ttl, class: 'form-control', value:"3600", id:"ttl" %>
    </div> 
    <div class="form-group field">
      <label>Allow zone transfer to these IPs (comma separated list)</label>
      <%=f.text_field :xfer, class: 'form-control', id:"xfer" %>
    </div>  
    <div class="form-group field">
      <label>Also Notify</label>
      <%=f.text_field :also_notify, class: 'form-control', id:"also_notify" %>
    </div>  
    <div class="form-group field">
      <label>Update ACL</label>
      <%=f.text_field :update_acl, class: 'form-control', id:"update_acl" %>
    </div> 
    <div class="form-group field">
      <label >Active</label>
      <%=f.check_box :status,class: 'mr-2', required: true%>
    </div>
    <%=submit_tag 'Create',class: 'btn btn-primary', onClick:"return validatename();"%>

  </fieldset>
<%end%>
<%if @response && @response["status"]=='ERROR'%>
    <div style="color: red;" class="mt-3"><%=@response["message"]%></</div> 
  <%end%>
</div>


<script type="text/javascript">
  $(document).ready(function (argument) {
    $('#FlashAlertsContainer').removeClass('d-none');
  });
</script>

<script type="text/javascript">
function validatename() {
  
    var dname = document.getElementById("dname").value;
    var dname2 = document.getElementById("dname");
    var re = /^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/;
    if (re.test(dname)) {
        return true;
    }
    else {
        dname2.style.border = "red solid 1px";
        return false;
    }
}
</script>
